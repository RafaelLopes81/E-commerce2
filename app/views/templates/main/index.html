{% extends 'base.html' %}

{% block content %}

<div class="container my-5">
    <h1 class="mb-4">Bem-vindo!</h1>
    <p class="lead">Edite aqui.</p>
    <div class="row">
        <!-- Exemplo de produto -->
        <div class="col-md-4">
            <div class="card mb-4 shadow-sm">
                <img src="{{ url_for('static', filename='images/produto1.jpg') }}" class="card-img-top" alt="Produto 1">
                <div class="card-body">
                    <h5 class="card-title">Produto</h5>
                    <p class="card-text">Descrição</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="text-accent fw-bold">R$ 59,90</span>
                        <a href="#" class="btn btn-sm text-accent bg-white">Comprar</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Adicione mais produtos conforme necessário -->
         <div class="row">
        
        {% if products %}
            {# Itera sobre a lista 'products' que veio do routes.py #}
            {% for product in products %}
                
                <div class="col-md-4">
                    <div class="card mb-4 shadow-sm">
                        
                        {# Assumindo que você tem uma coluna 'imagem_url' no Supabase #}
                        <img src="{{ product.imagem_url }}" class="card-img-top" alt="{{ product.nome }}">
                        
                        <div class="card-body">
                            
                            {# Título (Coluna 'nome') #}
                            <h5 class="card-title">{{ product.nome }}</h5> 
                            
                            {# Descrição (Coluna 'descricao') #}
                            <p class="card-text">{{ product.descricao }}</p> 
                            
                            <div class="d-flex justify-content-between align-items-center">
                                
                                {# Preço (Coluna 'preco') - usando filtro 'round' para formatar #}
                                <span class="text-accent fw-bold">R$ {{ product.preco | default(0) | round(2) }}</span>
                                
                                {# Link para Comprar/Adicionar ao Carrinho #}
                                {# Passamos o ID do produto para a rota do carrinho (lembre-se do 'add-to-cart/<product_id>'!) #}
                                <a href="#" class="btn btn-sm text-accent bg-white">Comprar</a>
                            </div>
                        </div>
                    </div>
                </div>
                
            {% endfor %}
            
        {% else %}
            {# Caso a lista 'products' esteja vazia ou tenha havido um erro #}
            <p>Nenhum produto encontrado no momento.</p>
        {% endif %}

    </div>
    </div>
</div>
    
{% endblock %}